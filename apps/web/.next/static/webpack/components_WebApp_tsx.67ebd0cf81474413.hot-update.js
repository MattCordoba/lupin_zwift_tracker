"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("components_WebApp_tsx",{

/***/ "../../packages/data/src/auth.ts":
/*!***************************************!*\
  !*** ../../packages/data/src/auth.ts ***!
  \***************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ensureUserProfile: function() { return /* binding */ ensureUserProfile; },\n/* harmony export */   observeAuthState: function() { return /* binding */ observeAuthState; },\n/* harmony export */   signInWithAppleCredential: function() { return /* binding */ signInWithAppleCredential; },\n/* harmony export */   signInWithGoogleCredential: function() { return /* binding */ signInWithGoogleCredential; },\n/* harmony export */   signInWithGoogleWeb: function() { return /* binding */ signInWithGoogleWeb; },\n/* harmony export */   signOutUser: function() { return /* binding */ signOutUser; },\n/* harmony export */   subscribeToUserProfile: function() { return /* binding */ subscribeToUserProfile; },\n/* harmony export */   updateUserPreferences: function() { return /* binding */ updateUserPreferences; }\n/* harmony export */ });\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/auth */ \"../../node_modules/.pnpm/firebase@10.14.1/node_modules/firebase/auth/dist/esm/index.esm.js\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/firestore */ \"../../node_modules/.pnpm/firebase@10.14.1/node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./firebase */ \"../../packages/data/src/firebase.ts\");\n\n\n\nconst defaultPreferences = {\n    units: \"metric\",\n    timeBudgetMinutes: 60\n};\nconst fallbackDate = ()=>new Date().toISOString();\nconst toIsoString = (value)=>{\n    if (!value) {\n        return fallbackDate();\n    }\n    if (typeof value === \"string\") {\n        return value;\n    }\n    return value.toDate().toISOString();\n};\nconst normalizeProfile = (uid, data)=>{\n    var _data_preferences, _data_preferences1;\n    var _data_displayName, _data_email, _data_photoUrl, _data_preferences_units, _data_preferences_timeBudgetMinutes;\n    return {\n        id: uid,\n        displayName: (_data_displayName = data.displayName) !== null && _data_displayName !== void 0 ? _data_displayName : \"Lupin Rider\",\n        email: (_data_email = data.email) !== null && _data_email !== void 0 ? _data_email : null,\n        photoUrl: (_data_photoUrl = data.photoUrl) !== null && _data_photoUrl !== void 0 ? _data_photoUrl : null,\n        preferences: {\n            units: (_data_preferences_units = (_data_preferences = data.preferences) === null || _data_preferences === void 0 ? void 0 : _data_preferences.units) !== null && _data_preferences_units !== void 0 ? _data_preferences_units : defaultPreferences.units,\n            timeBudgetMinutes: (_data_preferences_timeBudgetMinutes = (_data_preferences1 = data.preferences) === null || _data_preferences1 === void 0 ? void 0 : _data_preferences1.timeBudgetMinutes) !== null && _data_preferences_timeBudgetMinutes !== void 0 ? _data_preferences_timeBudgetMinutes : defaultPreferences.timeBudgetMinutes\n        },\n        createdAt: toIsoString(data.createdAt),\n        updatedAt: toIsoString(data.updatedAt)\n    };\n};\nconst observeAuthState = (handler)=>{\n    if (!_firebase__WEBPACK_IMPORTED_MODULE_2__.isFirebaseConfigured || !_firebase__WEBPACK_IMPORTED_MODULE_2__.firebaseAuth) {\n        handler(null);\n        return ()=>undefined;\n    }\n    return (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.onAuthStateChanged)(_firebase__WEBPACK_IMPORTED_MODULE_2__.firebaseAuth, handler);\n};\nconst subscribeToUserProfile = (uid, handler)=>{\n    if (!_firebase__WEBPACK_IMPORTED_MODULE_2__.firebaseDb) {\n        return ()=>undefined;\n    }\n    const ref = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_2__.firebaseDb, \"users\", uid);\n    return (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.onSnapshot)(ref, (snapshot)=>{\n        if (!snapshot.exists()) {\n            return;\n        }\n        handler(normalizeProfile(uid, snapshot.data()));\n    });\n};\nconst ensureUserProfile = async (user)=>{\n    if (!_firebase__WEBPACK_IMPORTED_MODULE_2__.firebaseDb) {\n        throw new Error(\"Firebase is not configured.\");\n    }\n    const ref = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_2__.firebaseDb, \"users\", user.uid);\n    const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDoc)(ref);\n    if (snapshot.exists()) {\n        return normalizeProfile(user.uid, snapshot.data());\n    }\n    var _user_displayName, _user_email, _user_photoURL;\n    const profile = {\n        id: user.uid,\n        displayName: (_user_displayName = user.displayName) !== null && _user_displayName !== void 0 ? _user_displayName : \"Lupin Rider\",\n        email: (_user_email = user.email) !== null && _user_email !== void 0 ? _user_email : null,\n        photoUrl: (_user_photoURL = user.photoURL) !== null && _user_photoURL !== void 0 ? _user_photoURL : null,\n        preferences: defaultPreferences,\n        createdAt: fallbackDate(),\n        updatedAt: fallbackDate()\n    };\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.setDoc)(ref, {\n        ...profile,\n        createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.serverTimestamp)(),\n        updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.serverTimestamp)()\n    });\n    return profile;\n};\nconst updateUserPreferences = async (uid, preferences)=>{\n    if (!_firebase__WEBPACK_IMPORTED_MODULE_2__.firebaseDb) {\n        throw new Error(\"Firebase is not configured.\");\n    }\n    const ref = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_2__.firebaseDb, \"users\", uid);\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(ref, {\n        preferences,\n        updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.serverTimestamp)()\n    });\n};\nconst signInWithGoogleWeb = ()=>{\n    if (!_firebase__WEBPACK_IMPORTED_MODULE_2__.isFirebaseConfigured || !_firebase__WEBPACK_IMPORTED_MODULE_2__.firebaseAuth) {\n        throw new Error(\"Firebase is not configured for Google auth.\");\n    }\n    const provider = new firebase_auth__WEBPACK_IMPORTED_MODULE_0__.GoogleAuthProvider();\n    provider.setCustomParameters({\n        prompt: \"select_account\"\n    });\n    return (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.signInWithPopup)(_firebase__WEBPACK_IMPORTED_MODULE_2__.firebaseAuth, provider);\n};\nconst signInWithGoogleCredential = (idToken, accessToken)=>{\n    if (!_firebase__WEBPACK_IMPORTED_MODULE_2__.isFirebaseConfigured || !_firebase__WEBPACK_IMPORTED_MODULE_2__.firebaseAuth) {\n        throw new Error(\"Firebase is not configured for Google auth.\");\n    }\n    const credential = firebase_auth__WEBPACK_IMPORTED_MODULE_0__.GoogleAuthProvider.credential(idToken || undefined, accessToken);\n    return (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.signInWithCredential)(_firebase__WEBPACK_IMPORTED_MODULE_2__.firebaseAuth, credential);\n};\nconst signInWithAppleCredential = (idToken, nonce)=>{\n    if (!_firebase__WEBPACK_IMPORTED_MODULE_2__.isFirebaseConfigured || !_firebase__WEBPACK_IMPORTED_MODULE_2__.firebaseAuth) {\n        throw new Error(\"Firebase is not configured for Apple auth.\");\n    }\n    const provider = new firebase_auth__WEBPACK_IMPORTED_MODULE_0__.OAuthProvider(\"apple.com\");\n    const credential = provider.credential({\n        idToken,\n        rawNonce: nonce\n    });\n    return (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.signInWithCredential)(_firebase__WEBPACK_IMPORTED_MODULE_2__.firebaseAuth, credential);\n};\nconst signOutUser = ()=>_firebase__WEBPACK_IMPORTED_MODULE_2__.firebaseAuth ? (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.signOut)(_firebase__WEBPACK_IMPORTED_MODULE_2__.firebaseAuth) : Promise.resolve();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0YsbURBQVlBLEVBQUU7UUFDMUMsTUFBTSxJQUFJK0IsTUFBTTtJQUNsQjtJQUNBLE1BQU1LLFdBQVcsSUFBSS9DLHdEQUFhQSxDQUFDO0lBQ25DLE1BQU1xRCxhQUFhTixTQUFTTSxVQUFVLENBQUM7UUFDckNGO1FBQ0FLLFVBQVVEO0lBQ1o7SUFDQSxPQUFPckQsbUVBQW9CQSxDQUFDUyxtREFBWUEsRUFBRTBDO0FBQzVDLEVBQUU7QUFFSyxNQUFNSSxjQUFjLElBQU85QyxtREFBWUEsR0FBR1Asc0RBQU9BLENBQUNPLG1EQUFZQSxJQUFJK0MsUUFBUUMsT0FBTyxHQUFJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uLi8uLi9wYWNrYWdlcy9kYXRhL3NyYy9hdXRoLnRzPzMxZDQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgR29vZ2xlQXV0aFByb3ZpZGVyLFxuICBPQXV0aFByb3ZpZGVyLFxuICBvbkF1dGhTdGF0ZUNoYW5nZWQsXG4gIHNpZ25JbldpdGhDcmVkZW50aWFsLFxuICBzaWduSW5XaXRoUG9wdXAsXG4gIHNpZ25PdXQsXG4gIHR5cGUgVXNlclxufSBmcm9tIFwiZmlyZWJhc2UvYXV0aFwiO1xuaW1wb3J0IHtcbiAgZG9jLFxuICBnZXREb2MsXG4gIG9uU25hcHNob3QsXG4gIHNlcnZlclRpbWVzdGFtcCxcbiAgc2V0RG9jLFxuICB1cGRhdGVEb2MsXG4gIHR5cGUgVW5zdWJzY3JpYmUsXG4gIHR5cGUgRG9jdW1lbnREYXRhLFxuICB0eXBlIFRpbWVzdGFtcFxufSBmcm9tIFwiZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5pbXBvcnQgdHlwZSB7IFVzZXJQcmVmZXJlbmNlcywgVXNlclByb2ZpbGUgfSBmcm9tIFwiQGx1cGluL3R5cGVzXCI7XG5pbXBvcnQgeyBmaXJlYmFzZUF1dGgsIGZpcmViYXNlRGIsIGlzRmlyZWJhc2VDb25maWd1cmVkIH0gZnJvbSBcIi4vZmlyZWJhc2VcIjtcblxuY29uc3QgZGVmYXVsdFByZWZlcmVuY2VzOiBVc2VyUHJlZmVyZW5jZXMgPSB7XG4gIHVuaXRzOiBcIm1ldHJpY1wiLFxuICB0aW1lQnVkZ2V0TWludXRlczogNjBcbn07XG5cbmNvbnN0IGZhbGxiYWNrRGF0ZSA9ICgpID0+IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcblxuY29uc3QgdG9Jc29TdHJpbmcgPSAodmFsdWU/OiBzdHJpbmcgfCBUaW1lc3RhbXApID0+IHtcbiAgaWYgKCF2YWx1ZSkge1xuICAgIHJldHVybiBmYWxsYmFja0RhdGUoKTtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIHJldHVybiB2YWx1ZS50b0RhdGUoKS50b0lTT1N0cmluZygpO1xufTtcblxuY29uc3Qgbm9ybWFsaXplUHJvZmlsZSA9ICh1aWQ6IHN0cmluZywgZGF0YTogRG9jdW1lbnREYXRhKTogVXNlclByb2ZpbGUgPT4ge1xuICByZXR1cm4ge1xuICAgIGlkOiB1aWQsXG4gICAgZGlzcGxheU5hbWU6IGRhdGEuZGlzcGxheU5hbWUgPz8gXCJMdXBpbiBSaWRlclwiLFxuICAgIGVtYWlsOiBkYXRhLmVtYWlsID8/IG51bGwsXG4gICAgcGhvdG9Vcmw6IGRhdGEucGhvdG9VcmwgPz8gbnVsbCxcbiAgICBwcmVmZXJlbmNlczoge1xuICAgICAgdW5pdHM6IGRhdGEucHJlZmVyZW5jZXM/LnVuaXRzID8/IGRlZmF1bHRQcmVmZXJlbmNlcy51bml0cyxcbiAgICAgIHRpbWVCdWRnZXRNaW51dGVzOlxuICAgICAgICBkYXRhLnByZWZlcmVuY2VzPy50aW1lQnVkZ2V0TWludXRlcyA/PyBkZWZhdWx0UHJlZmVyZW5jZXMudGltZUJ1ZGdldE1pbnV0ZXNcbiAgICB9LFxuICAgIGNyZWF0ZWRBdDogdG9Jc29TdHJpbmcoZGF0YS5jcmVhdGVkQXQpLFxuICAgIHVwZGF0ZWRBdDogdG9Jc29TdHJpbmcoZGF0YS51cGRhdGVkQXQpXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3Qgb2JzZXJ2ZUF1dGhTdGF0ZSA9IChoYW5kbGVyOiAodXNlcjogVXNlciB8IG51bGwpID0+IHZvaWQpID0+IHtcbiAgaWYgKCFpc0ZpcmViYXNlQ29uZmlndXJlZCB8fCAhZmlyZWJhc2VBdXRoKSB7XG4gICAgaGFuZGxlcihudWxsKTtcbiAgICByZXR1cm4gKCkgPT4gdW5kZWZpbmVkO1xuICB9XG4gIHJldHVybiBvbkF1dGhTdGF0ZUNoYW5nZWQoZmlyZWJhc2VBdXRoLCBoYW5kbGVyKTtcbn07XG5cbmV4cG9ydCBjb25zdCBzdWJzY3JpYmVUb1VzZXJQcm9maWxlID0gKFxuICB1aWQ6IHN0cmluZyxcbiAgaGFuZGxlcjogKHByb2ZpbGU6IFVzZXJQcm9maWxlKSA9PiB2b2lkXG4pOiBVbnN1YnNjcmliZSA9PiB7XG4gIGlmICghZmlyZWJhc2VEYikge1xuICAgIHJldHVybiAoKSA9PiB1bmRlZmluZWQ7XG4gIH1cbiAgY29uc3QgcmVmID0gZG9jKGZpcmViYXNlRGIsIFwidXNlcnNcIiwgdWlkKTtcbiAgcmV0dXJuIG9uU25hcHNob3QocmVmLCAoc25hcHNob3QpID0+IHtcbiAgICBpZiAoIXNuYXBzaG90LmV4aXN0cygpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGhhbmRsZXIobm9ybWFsaXplUHJvZmlsZSh1aWQsIHNuYXBzaG90LmRhdGEoKSkpO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBlbnN1cmVVc2VyUHJvZmlsZSA9IGFzeW5jICh1c2VyOiBVc2VyKTogUHJvbWlzZTxVc2VyUHJvZmlsZT4gPT4ge1xuICBpZiAoIWZpcmViYXNlRGIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJGaXJlYmFzZSBpcyBub3QgY29uZmlndXJlZC5cIik7XG4gIH1cbiAgY29uc3QgcmVmID0gZG9jKGZpcmViYXNlRGIsIFwidXNlcnNcIiwgdXNlci51aWQpO1xuICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvYyhyZWYpO1xuICBpZiAoc25hcHNob3QuZXhpc3RzKCkpIHtcbiAgICByZXR1cm4gbm9ybWFsaXplUHJvZmlsZSh1c2VyLnVpZCwgc25hcHNob3QuZGF0YSgpKTtcbiAgfVxuXG4gIGNvbnN0IHByb2ZpbGU6IFVzZXJQcm9maWxlID0ge1xuICAgIGlkOiB1c2VyLnVpZCxcbiAgICBkaXNwbGF5TmFtZTogdXNlci5kaXNwbGF5TmFtZSA/PyBcIkx1cGluIFJpZGVyXCIsXG4gICAgZW1haWw6IHVzZXIuZW1haWwgPz8gbnVsbCxcbiAgICBwaG90b1VybDogdXNlci5waG90b1VSTCA/PyBudWxsLFxuICAgIHByZWZlcmVuY2VzOiBkZWZhdWx0UHJlZmVyZW5jZXMsXG4gICAgY3JlYXRlZEF0OiBmYWxsYmFja0RhdGUoKSxcbiAgICB1cGRhdGVkQXQ6IGZhbGxiYWNrRGF0ZSgpXG4gIH07XG5cbiAgYXdhaXQgc2V0RG9jKHJlZiwge1xuICAgIC4uLnByb2ZpbGUsXG4gICAgY3JlYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSxcbiAgICB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpXG4gIH0pO1xuXG4gIHJldHVybiBwcm9maWxlO1xufTtcblxuZXhwb3J0IGNvbnN0IHVwZGF0ZVVzZXJQcmVmZXJlbmNlcyA9IGFzeW5jIChcbiAgdWlkOiBzdHJpbmcsXG4gIHByZWZlcmVuY2VzOiBVc2VyUHJlZmVyZW5jZXNcbik6IFByb21pc2U8dm9pZD4gPT4ge1xuICBpZiAoIWZpcmViYXNlRGIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJGaXJlYmFzZSBpcyBub3QgY29uZmlndXJlZC5cIik7XG4gIH1cbiAgY29uc3QgcmVmID0gZG9jKGZpcmViYXNlRGIsIFwidXNlcnNcIiwgdWlkKTtcbiAgYXdhaXQgdXBkYXRlRG9jKHJlZiwge1xuICAgIHByZWZlcmVuY2VzLFxuICAgIHVwZGF0ZWRBdDogc2VydmVyVGltZXN0YW1wKClcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3Qgc2lnbkluV2l0aEdvb2dsZVdlYiA9ICgpID0+IHtcbiAgaWYgKCFpc0ZpcmViYXNlQ29uZmlndXJlZCB8fCAhZmlyZWJhc2VBdXRoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRmlyZWJhc2UgaXMgbm90IGNvbmZpZ3VyZWQgZm9yIEdvb2dsZSBhdXRoLlwiKTtcbiAgfVxuICBjb25zdCBwcm92aWRlciA9IG5ldyBHb29nbGVBdXRoUHJvdmlkZXIoKTtcbiAgcHJvdmlkZXIuc2V0Q3VzdG9tUGFyYW1ldGVycyh7IHByb21wdDogXCJzZWxlY3RfYWNjb3VudFwiIH0pO1xuICByZXR1cm4gc2lnbkluV2l0aFBvcHVwKGZpcmViYXNlQXV0aCwgcHJvdmlkZXIpO1xufTtcblxuZXhwb3J0IGNvbnN0IHNpZ25JbldpdGhHb29nbGVDcmVkZW50aWFsID0gKGlkVG9rZW4/OiBzdHJpbmcsIGFjY2Vzc1Rva2VuPzogc3RyaW5nKSA9PiB7XG4gIGlmICghaXNGaXJlYmFzZUNvbmZpZ3VyZWQgfHwgIWZpcmViYXNlQXV0aCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkZpcmViYXNlIGlzIG5vdCBjb25maWd1cmVkIGZvciBHb29nbGUgYXV0aC5cIik7XG4gIH1cbiAgY29uc3QgY3JlZGVudGlhbCA9IEdvb2dsZUF1dGhQcm92aWRlci5jcmVkZW50aWFsKGlkVG9rZW4gfHwgdW5kZWZpbmVkLCBhY2Nlc3NUb2tlbik7XG4gIHJldHVybiBzaWduSW5XaXRoQ3JlZGVudGlhbChmaXJlYmFzZUF1dGgsIGNyZWRlbnRpYWwpO1xufTtcblxuZXhwb3J0IGNvbnN0IHNpZ25JbldpdGhBcHBsZUNyZWRlbnRpYWwgPSAoaWRUb2tlbjogc3RyaW5nLCBub25jZT86IHN0cmluZykgPT4ge1xuICBpZiAoIWlzRmlyZWJhc2VDb25maWd1cmVkIHx8ICFmaXJlYmFzZUF1dGgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJGaXJlYmFzZSBpcyBub3QgY29uZmlndXJlZCBmb3IgQXBwbGUgYXV0aC5cIik7XG4gIH1cbiAgY29uc3QgcHJvdmlkZXIgPSBuZXcgT0F1dGhQcm92aWRlcihcImFwcGxlLmNvbVwiKTtcbiAgY29uc3QgY3JlZGVudGlhbCA9IHByb3ZpZGVyLmNyZWRlbnRpYWwoe1xuICAgIGlkVG9rZW4sXG4gICAgcmF3Tm9uY2U6IG5vbmNlXG4gIH0pO1xuICByZXR1cm4gc2lnbkluV2l0aENyZWRlbnRpYWwoZmlyZWJhc2VBdXRoLCBjcmVkZW50aWFsKTtcbn07XG5cbmV4cG9ydCBjb25zdCBzaWduT3V0VXNlciA9ICgpID0+IChmaXJlYmFzZUF1dGggPyBzaWduT3V0KGZpcmViYXNlQXV0aCkgOiBQcm9taXNlLnJlc29sdmUoKSk7XG4iXSwibmFtZXMiOlsiR29vZ2xlQXV0aFByb3ZpZGVyIiwiT0F1dGhQcm92aWRlciIsIm9uQXV0aFN0YXRlQ2hhbmdlZCIsInNpZ25JbldpdGhDcmVkZW50aWFsIiwic2lnbkluV2l0aFBvcHVwIiwic2lnbk91dCIsImRvYyIsImdldERvYyIsIm9uU25hcHNob3QiLCJzZXJ2ZXJUaW1lc3RhbXAiLCJzZXREb2MiLCJ1cGRhdGVEb2MiLCJmaXJlYmFzZUF1dGgiLCJmaXJlYmFzZURiIiwiaXNGaXJlYmFzZUNvbmZpZ3VyZWQiLCJkZWZhdWx0UHJlZmVyZW5jZXMiLCJ1bml0cyIsInRpbWVCdWRnZXRNaW51dGVzIiwiZmFsbGJhY2tEYXRlIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwidG9Jc29TdHJpbmciLCJ2YWx1ZSIsInRvRGF0ZSIsIm5vcm1hbGl6ZVByb2ZpbGUiLCJ1aWQiLCJkYXRhIiwiaWQiLCJkaXNwbGF5TmFtZSIsImVtYWlsIiwicGhvdG9VcmwiLCJwcmVmZXJlbmNlcyIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsIm9ic2VydmVBdXRoU3RhdGUiLCJoYW5kbGVyIiwidW5kZWZpbmVkIiwic3Vic2NyaWJlVG9Vc2VyUHJvZmlsZSIsInJlZiIsInNuYXBzaG90IiwiZXhpc3RzIiwiZW5zdXJlVXNlclByb2ZpbGUiLCJ1c2VyIiwiRXJyb3IiLCJwcm9maWxlIiwicGhvdG9VUkwiLCJ1cGRhdGVVc2VyUHJlZmVyZW5jZXMiLCJzaWduSW5XaXRoR29vZ2xlV2ViIiwicHJvdmlkZXIiLCJzZXRDdXN0b21QYXJhbWV0ZXJzIiwicHJvbXB0Iiwic2lnbkluV2l0aEdvb2dsZUNyZWRlbnRpYWwiLCJpZFRva2VuIiwiYWNjZXNzVG9rZW4iLCJjcmVkZW50aWFsIiwic2lnbkluV2l0aEFwcGxlQ3JlZGVudGlhbCIsIm5vbmNlIiwicmF3Tm9uY2UiLCJzaWduT3V0VXNlciIsIlByb21pc2UiLCJyZXNvbHZlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../packages/data/src/auth.ts\n"));

/***/ })

});